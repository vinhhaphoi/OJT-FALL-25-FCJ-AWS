<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content="VinhDQSE180012 | OJT_FALL_25 - AWS_FCJ_Internship Program"><meta name=author content="its.vnhdq@gmail.com"><link rel=icon href=../../../images/favicon.png type=image/png><title>Blog 1 | Báo cáo thực tập</title>
<link href=../../../css/nucleus.css?1765505219 rel=stylesheet><link href=../../../css/fontawesome-all.min.css?1765505219 rel=stylesheet><link href=../../../css/hybrid.css?1765505219 rel=stylesheet><link href=../../../css/featherlight.min.css?1765505219 rel=stylesheet><link href=../../../css/perfect-scrollbar.min.css?1765505219 rel=stylesheet><link href=../../../css/auto-complete.css?1765505219 rel=stylesheet><link href=../../../css/atom-one-dark-reasonable.css?1765505219 rel=stylesheet><link href=../../../css/theme.css?1765505219 rel=stylesheet><link href=../../../css/hugo-theme.css?1765505219 rel=stylesheet><link href=../../../css/theme-workshop.css?1765505219 rel=stylesheet><script src=../../../js/jquery-3.3.1.min.js?1765505219></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../../vi/3-blogstranslated/3.1-blog1/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../../js/lunr.min.js?1765505219></script><script type=text/javascript src=../../../js/auto-complete.js?1765505219></script><script type=text/javascript>var baseurl="https://report.vinhhaphoi.com//vi"</script><script type=text/javascript src=../../../js/search.js?1765505219></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/1-worklog/ title="Nhật ký công việc" class=dd-item><a href=../../../vi/1-worklog/><b>1. </b>Nhật ký công việc
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/1-worklog/1.1-week1/ title="Worklog Tuần 1" class=dd-item><a href=../../../vi/1-worklog/1.1-week1/><b>1.1. </b>Worklog Tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.2-week2/ title="Worklog Tuần 2" class=dd-item><a href=../../../vi/1-worklog/1.2-week2/><b>1.2. </b>Worklog Tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.3-week3/ title="Worklog Tuần 3" class=dd-item><a href=../../../vi/1-worklog/1.3-week3/><b>1.3. </b>Worklog Tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.4-week4/ title="Worklog Tuần 4" class=dd-item><a href=../../../vi/1-worklog/1.4-week4/><b>1.4. </b>Worklog Tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.5-week5/ title="Worklog Tuần 5" class=dd-item><a href=../../../vi/1-worklog/1.5-week5/><b>1.5. </b>Worklog Tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.6-week6/ title="Worklog Tuần 6" class=dd-item><a href=../../../vi/1-worklog/1.6-week6/><b>1.6. </b>Worklog Tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.7-week7/ title="Worklog Tuần 7" class=dd-item><a href=../../../vi/1-worklog/1.7-week7/><b>1.7. </b>Worklog Tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.8-week8/ title="Worklog Tuần 8" class=dd-item><a href=../../../vi/1-worklog/1.8-week8/><b>1.8. </b>Worklog Tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.9-week9/ title="Worklog Tuần 9" class=dd-item><a href=../../../vi/1-worklog/1.9-week9/><b>1.9. </b>Worklog Tuần 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.10-week10/ title="Worklog Tuần 10" class=dd-item><a href=../../../vi/1-worklog/1.10-week10/><b>1.10. </b>Worklog Tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.11-week11/ title="Worklog Tuần 11" class=dd-item><a href=../../../vi/1-worklog/1.11-week11/><b>1.11. </b>Worklog Tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.12-week12/ title="Worklog Tuần 12" class=dd-item><a href=../../../vi/1-worklog/1.12-week12/><b>1.12. </b>Worklog Tuần 12
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/2-proposal/ title="Đề xuất" class=dd-item><a href=../../../vi/2-proposal/><b>2. </b>Đề xuất
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/ title="Các bài blogs đã dịch" class="dd-item
parent"><a href=../../../vi/3-blogstranslated/><b>3. </b>Các bài blogs đã dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class="dd-item
active"><a href=../../../vi/3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../../vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../../vi/3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/4-eventparticipated/ title="Các events đã tham gia" class=dd-item><a href=../../../vi/4-eventparticipated/><b>4. </b>Các events đã tham gia
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../../vi/4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../../vi/4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=../../../vi/4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=../../../vi/4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.5-event5/ title="Event 5" class=dd-item><a href=../../../vi/4-eventparticipated/4.5-event5/><b>4.5. </b>Event 5
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/ title=Workshop class=dd-item><a href=../../../vi/5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.1-introduction/ title="Giới thiệu" class=dd-item><a href=../../../vi/5-workshop/5.1-introduction/><b>5.1. </b>Giới thiệu
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.2-prerequisites/ title="Điều kiện tiên quyết & Dữ liệu" class=dd-item><a href=../../../vi/5-workshop/5.2-prerequisites/><b>5.2. </b>Điều kiện tiên quyết & Dữ liệu
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-connect-data/ title="Kết nối Dữ liệu" class=dd-item><a href=../../../vi/5-workshop/5.3-connect-data/><b>5.3. </b>Kết nối Dữ liệu
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-create-visuals/ title="Tạo Trực quan hóa" class=dd-item><a href=../../../vi/5-workshop/5.4-create-visuals/><b>5.4. </b>Tạo Trực quan hóa
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.5-publish-dashboard/ title="Xuất bản Dashboard" class=dd-item><a href=../../../vi/5-workshop/5.5-publish-dashboard/><b>5.5. </b>Xuất bản Dashboard
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.6-cleanup/ title="Dọn dẹp" class=dd-item><a href=../../../vi/5-workshop/5.6-cleanup/><b>5.6. </b>Dọn dẹp
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/6-self-evaluation/ title="Tự đánh giá" class=dd-item><a href=../../../vi/6-self-evaluation/><b>6. </b>Tự đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=../../../vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/vinhhaphoi2/><i class='fab fa-facebook'></i> Trang cá nhân facebook của Vinhhaphoi</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://report.vinhhaphoi.com/3-blogstranslated/3.1-blog1/>English</option><option id=vi value=https://report.vinhhaphoi.com/vi/3-blogstranslated/3.1-blog1/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title='Edit this page' href=https://github.com/vinhhaphoi/OJT-FALL-25-FCJ-AWS3-BlogsTranslated/3.1-Blog1/_index.vi.md target=blank><i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../../vi/>Báo cáo thực tập</a> > <a href=../../../vi/3-blogstranslated/>Các bài blogs đã dịch</a> > Blog 1</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#giới-thiệu-nested-materialized-views>Giới thiệu nested materialized views</a></li><li><a href=#architecture>Architecture</a></li><li><a href=#tạo-và-sử-dụng-nested-materialized-views>Tạo và sử dụng nested materialized views</a></li><li><a href=#thực-hành-tốt-với-materialized-view>Thực hành tốt với materialized view</a></li><li><a href=#kết-luận>Kết luận</a></li><li><a href=#thông-tin-tác-giả>Thông tin tác giả</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 1</h1><h1 id=khai-thác-sức-mạnh-của-nested-materialized-views-và-khám-phá-tính-năng-cascading-refresh>Khai thác sức mạnh của Nested Materialized Views và khám phá tính năng Cascading Refresh</h1><h3 id=giới-thiệu-nested-materialized-views>Giới thiệu nested materialized views</h3><p>Nested materialized views (View vật chất hóa lồng nhau) trong Amazon Redshift cho phép bạn tạo các materialized view dựa trên các materialized view khác. Khả năng này cho phép tạo ra một cấu trúc phân cấp của các kết quả được tính toán trước, nâng cao đáng kể hiệu suất truy vấn và hiệu quả xử lý dữ liệu. Với nested materialized views, bạn có thể xây dựng các lớp trừu tượng dữ liệu đa tầng, tạo ra các view ngày càng phức tạp và chuyên biệt phù hợp với các nhu cầu kinh doanh cụ thể. Cách tiếp cận phân lớp này mang lại một số lợi thế:</p><ul><li><strong>Cải thiện hiệu suất truy vấn</strong>: Mỗi cấp độ của phân cấp nested materialized view đóng vai trò như một bộ nhớ đệm, cho phép các truy vấn truy cập nhanh vào dữ liệu đã tính toán trước mà không cần phải duyệt qua các bảng cơ sở bên dưới.</li><li><strong>Giảm tải tính toán</strong>: Bằng cách giảm tải công việc tính toán cho quy trình làm mới materialized view, bạn có thể giảm đáng kể thời gian chạy và sử dụng tài nguyên cho các truy vấn hàng ngày của mình.</li><li><strong>Đơn giản hóa mô hình dữ liệu</strong>: Nested materialized views cho phép bạn tạo một mô hình dữ liệu mô-đun và có thể mở rộng hơn, trong đó mỗi lớp đại diện cho một khái niệm kinh doanh hoặc trường hợp sử dụng cụ thể.</li><li><strong>Làm mới gia tăng</strong>: Redshift materialized views hỗ trợ làm mới gia tăng, cho phép bạn chỉ cập nhật dữ liệu đã thay đổi trong phân cấp lồng nhau, tối ưu hóa hơn nữa quy trình làm mới.</li><li><strong>Cascading Materialized Views</strong>: Redshift materialized views với tùy chọn CASCADE có thể giúp người dùng doanh nghiệp loại bỏ nhu cầu tạo và duy trì các đường ống dữ liệu của riêng họ.</li></ul><p>Bạn có thể triển khai nested materialized views bằng câu lệnh <a href=https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-create-sql-command.html>CREATE MATERIALIZED VIEW</a>, cho phép tham chiếu đến các materialized view khác trong định nghĩa. Các trường hợp sử dụng phổ biến bao gồm:</p><ul><li>Các đường ống chuyển đổi dữ liệu dạng mô-đun</li><li>Tổng hợp phân cấp cho phân tích lũy tiến</li><li>Các đường ống xác thực dữ liệu đa cấp</li><li>Quản lý snapshot dữ liệu lịch sử</li><li>Báo cáo BI tối ưu hóa với kết quả tính toán trước</li></ul><h3 id=architecture>Architecture</h3><p>Sơ đồ kiến trúc mô tả cấu trúc nested materialized view của Amazon Redshift: thể hiện nhiều bảng nguồn (màu cam) kết nối đến các materialized view (màu đỏ), với các liên kết đến một lớp view lồng nhau và bảng chia sẻ dữ liệu (màu xanh lá). Sơ đồ này còn hiển thị các điểm tích hợp cho người dùng và trực quan hóa với QuickSight.</p><ol><li><strong>Bảng nguồn (Base Table)</strong>: Đây là các bảng chứa dữ liệu thô trong kho dữ liệu, có thể là bảng cục bộ hoặc bảng chia sẻ dữ liệu.</li><li><strong>Materialized View cơ sở (Base Materialized View)</strong>: Đây là các materialized view cấp 1 được tạo trực tiếp trên bảng nguồn, đóng vai trò tổng hợp, biến đổi dữ liệu phổ biến, vừa có thể làm nền tảng cho các view lồng nhau, vừa có thể được truy cập bởi người dùng cuối.</li><li><strong>Nested Materialized View</strong>: Các materialized view cấp 2 (hoặc cao hơn) được xây dựng dựa trên các materialized view cơ sở. Các view lồng nhau này tiếp tục tổng hợp, lọc hoặc biến đổi dữ liệu từ cấp dưới.</li><li><strong>Ứng dụng/Người dùng/Báo cáo BI</strong>: Các ứng dụng hoặc công cụ phân tích BI sẽ truy xuất vào lớp nested materialized view để tạo báo cáo, dashboard. Các view lồng nhau này cung cấp cấu trúc dữ liệu đã tiền xử lý tối ưu hóa cho truy vấn và báo cáo hiệu quả hơn.</li></ol><h3 id=tạo-và-sử-dụng-nested-materialized-views>Tạo và sử dụng nested materialized views</h3><p>Để minh họa cách hoạt động của nested materialized views trong Amazon Redshift, chúng ta sẽ sử dụng bộ dữ liệu TPC-DS. Chúng ta sẽ tạo ba truy vấn sử dụng các bảng STORE, STORE_SALES, CUSTOMER và CUSTOMER_ADDRESS để mô phỏng các báo cáo kho dữ liệu. Ví dụ này sẽ minh họa cách nhiều báo cáo có thể chia sẻ tập kết quả và cách materialized views có thể cải thiện cả hiệu quả tài nguyên và hiệu suất truy vấn.</p><p>Hãy xem xét các truy vấn sau đây như là các truy vấn dashboard:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> cust.c_customer_id, cust.c_first_name, cust.c_last_name, sales.ss_item_sk, sales.ss_quantity, cust.c_current_addr_sk
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> store_sales sales
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> customer cust <span style=color:#66d9ef>ON</span> sales.ss_customer_sk <span style=color:#f92672>=</span> cust.c_customer_sk;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> cust.c_customer_id, cust.c_first_name, cust.c_last_name, sales.ss_item_sk, sales.ss_quantity, cust.c_current_addr_sk, store.s_store_name
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> store_sales sales
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> customer cust <span style=color:#66d9ef>ON</span> sales.ss_customer_sk <span style=color:#f92672>=</span> cust.c_customer_sk
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> store store <span style=color:#66d9ef>ON</span> sales.ss_store_sk <span style=color:#f92672>=</span> store.s_store_sk;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> cust.c_customer_id, cust.c_first_name, cust.c_last_name, sales.ss_item_sk, sales.ss_quantity, addr.ca_state
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> store_sales sales
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> customer cust <span style=color:#66d9ef>ON</span> sales.ss_customer_sk <span style=color:#f92672>=</span> cust.c_customer_sk
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> store store <span style=color:#66d9ef>ON</span> sales.ss_store_sk <span style=color:#f92672>=</span> store.s_store_sk
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> customer_address addr <span style=color:#66d9ef>ON</span> cust.c_current_addr_sk <span style=color:#f92672>=</span> addr.ca_address_sk;
</span></span></code></pre></div><p>Lưu ý rằng phép nối giữa bảng STORE_SALES và CUSTOMER có mặt ở cả 3 truy vấn (dashboard).
Truy vấn thứ hai thêm một phép nối với bảng STORE và truy vấn thứ ba là truy vấn thứ hai với thêm một phép nối với bảng CUSTOMER_ADDRESS. Mô hình này phổ biến trong các kịch bản kinh doanh thông minh (BI). Như đã đề cập trước đó, việc sử dụng materialized view có thể tăng tốc truy vấn vì tập kết quả được lưu trữ và sẵn sàng để cung cấp cho người dùng, tránh việc xử lý lại cùng một dữ liệu. Trong những trường hợp như thế này, chúng ta có thể sử dụng nested materialized views để tái sử dụng dữ liệu đã xử lý.</p><p>Khi chuyển đổi các truy vấn của chúng ta thành một tập hợp các nested materialized views, kết quả sẽ như sau:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> MATERIALIZED <span style=color:#66d9ef>VIEW</span> StoreSalesCust <span style=color:#66d9ef>as</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> cust.c_customer_id, cust.c_first_name, cust.c_last_name, sales.ss_item_sk, sales.ss_store_sk, sales.ss_quantity, cust.c_current_addr_sk
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> store_sales sales
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> customer cust <span style=color:#66d9ef>ON</span> sales.ss_customer_sk <span style=color:#f92672>=</span> cust.c_customer_sk;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> MATERIALIZED <span style=color:#66d9ef>VIEW</span> StoreSalesCustStore <span style=color:#66d9ef>as</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> storesalescust.c_customer_id, storesalescust.c_first_name, storesalescust.c_last_name, storesalescust.ss_item_sk, storesalescust.ss_quantity, storesalescust.c_current_addr_sk, store.s_store_name
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> StoreSalesCust storesalescust
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> store store <span style=color:#66d9ef>ON</span> storesalescust.ss_store_sk <span style=color:#f92672>=</span> store.s_store_sk;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> MATERIALIZED <span style=color:#66d9ef>VIEW</span> StoreSalesCustAddress <span style=color:#66d9ef>as</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> storesalescuststore.c_customer_id, storesalescuststore.c_first_name, storesalescuststore.c_last_name, storesalescuststore.ss_item_sk, storesalescuststore.ss_quantity, addr.ca_state
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> StoreSalesCustStore storesalescuststore
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> customer_address addr <span style=color:#66d9ef>ON</span> storesalescuststore.c_current_addr_sk <span style=color:#f92672>=</span> addr.ca_address_sk;
</span></span></code></pre></div><p>Nested materialized views có thể cải thiện hiệu suất và hiệu quả tài nguyên bằng cách tái sử dụng kết quả view ban đầu, giảm thiểu các phép nối dư thừa và làm việc với các tập kết quả nhỏ hơn. Điều này tạo ra một cấu trúc phân cấp nơi các materialized view phụ thuộc lẫn nhau. Do các phụ thuộc này, bạn phải làm mới các view theo một thứ tự cụ thể.</p><p>Với tùy chọn mới “REFRESH MATERIALIZED VIEW mv_name CASCADE”, bạn sẽ có thể làm mới toàn bộ chuỗi phụ thuộc cho các materialized view mà bạn có. Lưu ý rằng trong ví dụ này, chúng ta đang sử dụng materialized view thứ ba, StoreSalesCustAddress, và điều này sẽ làm mới tất cả 3 materialized view vì chúng phụ thuộc lẫn nhau.</p><p>Nếu chúng ta sử dụng materialized view thứ hai với tùy chọn CASCADE, chúng ta sẽ chỉ làm mới materialized view thứ nhất và thứ hai, giữ nguyên view thứ ba. Điều này có thể hữu ích khi chúng ta cần giữ một số materialized view với dữ liệu ít cập nhật hơn những view khác.</p><p>System view <a href=https://docs.aws.amazon.com/redshift/latest/dg/r_SVL_MV_REFRESH_STATUS.html>SVL_MV_REFRESH_STATUS</a> tiết lộ trình tự làm mới của các materialized view. Khi kích hoạt làm mới cascade trên StoreSalesCustAddress, hệ thống tuân theo chuỗi phụ thuộc mà chúng ta đã thiết lập: StoreSalesCust làm mới trước, tiếp theo là StoreSalesCustStore, và cuối cùng là StoreSalesCustAddress. Điều này chứng minh cách hoạt động làm mới tôn trọng cấu trúc phân cấp của các materialized view của chúng ta.</p><h4 id=lưu-ý>Lưu ý</h4><p>Xem xét một chuỗi phụ thuộc nơi StoreSalesCust (A) → StoreSalesCustStore (B) → StoreSalesCustAddress (C).</p><ul><li>Hành vi làm mới CASCADE hoạt động như sau:<ul><li>Khi làm mới C với CASCADE: A, B, và C đều sẽ được làm mới.</li><li>Khi làm mới B với CASCADE: Chỉ A và B sẽ được làm mới.</li><li>Khi làm mới A với CASCADE: Chỉ A sẽ được làm mới.</li><li>Nếu bạn đặc biệt cần làm mới A và C nhưng không phải B, bạn phải thực hiện các thao tác làm mới riêng biệt mà không sử dụng CASCADE—đầu tiên làm mới A, sau đó làm mới C trực tiếp.</li></ul></li></ul><h3 id=thực-hành-tốt-với-materialized-view>Thực hành tốt với materialized view</h3><ul><li><strong>Cải thiện truy vấn nguồn</strong>: Bắt đầu với một câu lệnh SELECT được tối ưu hóa tốt cho materialized view của bạn. Điều này đặc biệt quan trọng đối với các view cần xây dựng lại hoàn toàn trong mỗi lần làm mới.</li><li><strong>Lập kế hoạch chiến lược làm mới</strong>: Khi tạo các materialized view phụ thuộc vào các materialized view khác, bạn không thể sử dụng AUTO REFRESH YES. Thay vào đó, hãy triển khai các cơ chế làm mới được điều phối bằng cách sử dụng Redshift Data API với Amazon EventBridge để lập lịch và AWS Step Functions để quản lý quy trình làm việc.</li><li><strong>Tận dụng distribution và sort keys</strong>: Cấu hình đúng distribution và sort keys trên các materialized view dựa trên các mẫu truy vấn của chúng để tối ưu hóa hiệu suất. Các khóa được chọn tốt sẽ cải thiện tốc độ truy vấn và giảm các hoạt động I/O.</li></ul><h3 id=kết-luận>Kết luận</h3><p>Bài đăng này đã chỉ ra cách tạo nested Amazon Redshift materialized views và làm mới các materialized view con bằng cách sử dụng tùy chọn REFRESH CASCADE mới. Bạn có thể nhanh chóng xây dựng và duy trì các đường ống xử lý dữ liệu hiệu quả và mở rộng liền mạch các lợi ích thực thi truy vấn độ trễ thấp của materialized views sang phân tích dữ liệu.</p><p>Nếu bạn chưa quen với materialized views nhưng muốn tăng hiệu suất khối lượng công việc của mình, Amazon Redshift cung cấp tính năng Automated materialized view (auto-MV). Hệ thống thông minh này giám sát khối lượng công việc của bạn và tự động tạo các materialized view để nâng cao hiệu suất tổng thể. Để biết thêm thông tin chi tiết về tính năng này, vui lòng tham khảo <a href=https://docs.aws.amazon.com/redshift/latest/dg/materialized-view-auto-mv.html>Automated materialized views</a>.</p><h3 id=thông-tin-tác-giả>Thông tin tác giả</h3><p><strong>Ritesh Kumar Sinha</strong> là một Kiến trúc sư giải pháp chuyên về phân tích (Analytics Specialist Solutions Architect) làm việc tại San Francisco. Ông đã giúp khách hàng xây dựng các giải pháp kho dữ liệu và dữ liệu lớn có khả năng mở rộng trong hơn 16 năm. Ông yêu thích thiết kế và xây dựng các giải pháp đầu cuối hiệu quả trên AWS. Trong thời gian rảnh rỗi, ông thích đọc sách, đi bộ và tập yoga.</p><p><strong>Raza Hafeez</strong> là một Quản lý sản phẩm cấp cao (Senior Product Manager) tại Amazon Redshift. Ông có hơn 13 năm kinh nghiệm chuyên môn trong việc xây dựng và tối ưu hóa các kho dữ liệu doanh nghiệp và rất đam mê việc giúp khách hàng nhận ra sức mạnh từ dữ liệu của họ. Ông chuyên về việc di chuyển các kho dữ liệu doanh nghiệp sang Kiến trúc dữ liệu hiện đại của AWS.</p><p><strong>Ricardo Serafim</strong> là một Kiến trúc sư giải pháp chuyên về phân tích cấp cao (Senior Analytics Specialist Solutions Architect) tại AWS. Ông đã hỗ trợ các công ty với các giải pháp Kho dữ liệu từ năm 2007.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../../vi/3-blogstranslated/ title="Các bài blogs đã dịch"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../../vi/3-blogstranslated/3.2-blog2/ title="Blog 2" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../../js/clipboard.min.js?1765505219></script><script src=../../../js/perfect-scrollbar.min.js?1765505219></script><script src=../../../js/perfect-scrollbar.jquery.min.js?1765505219></script><script src=../../../js/jquery.sticky.js?1765505219></script><script src=../../../js/featherlight.min.js?1765505219></script><script src=../../../js/highlight.pack.js?1765505219></script><script>hljs.initHighlightingOnLoad()</script><script src=../../../js/modernizr.custom-3.6.0.js?1765505219></script><script src=../../../js/learn.js?1765505219></script><script src=../../../js/hugo-learn.js?1765505219></script><link href=../../../mermaid/mermaid.css?1765505219 rel=stylesheet><script src=../../../mermaid/mermaid.js?1765505219></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>